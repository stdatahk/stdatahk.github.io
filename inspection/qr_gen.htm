<html>
<head>
<title>FRS | Admin| Gen QR </title>
<script src="qrcode.min.js"></script>
</head>
<body>

<div style='position:absolute;top:31px;left:22px;z-Index:999;'>
	<table border=0 width=600 cellpadding=5 cellspacing=5 style='font-family:Helvetica;'>
		<tr><td colspan=2 style='font-size:15pt;font-weight:bold;'>
		QR條碼生成器： <input id='defectid' type=text size=13>
		<input type=button value='提交' onclick="location.href='qr_gen.htm#'+defectid.value+'&t=4';location.reload();">
		<br><br>
		
		<!-- QR Codes -->
		<div id='qrOuter' style='position:absolute; top:80px; left:40px; z-Index:1;'>
			<div id="qrcode"></div>
		</div>
		
		<br><br>

		<div style='position:absolute; top:380px; left:40px;'>
			<span style='font-size:12pt;'>款式:</span>
			<button onClick='qrCodeStyle(1);'>彩色1</button>
			<button onClick='qrCodeStyle(2);'>彩色2</button>
			<button onClick='qrCodeStyle(3);'>基本</button>
			<button onClick='qrCodeStyle(4);'>最基本</button>
		</div>
		</td></tr>
	</table>
</div>

<script type="text/javascript">
function qrCodeStyle(type) {
	location.href = 'qr_gen.htm#'+ uuid +'&t='+ type;
	location.reload();
}

//query string parsing
var pos = location.href.lastIndexOf('#');
var qstr = location.href.substring(pos+1).trim();
var uuid = qstr;
var qrStyle = 1; //default: fancy1
pos = qstr.lastIndexOf('&t=');
if(pos > 0) {
	uuid = qstr.substring(0, pos).trim();
	qrStyle = qstr.substring(pos+3).trim();
}
if(uuid.charAt(0)=='D') {
	document.getElementById('defectid').value = uuid;
	var myColor = '#000000'; //black
	if(qrStyle==1 || qrStyle==2) myColor = '#0B0B45';  
	                             //#f5a02a <- matched logo orange

	var qrcode = new QRCode(document.getElementById("qrcode"), {
		text: uuid,
		width:  256,
		height: 256,
		colorDark  : myColor,
		colorLight : "#ffffff",
		correctLevel : QRCode.CorrectLevel.H  
		// Usage >> L:1,M:0,Q:3,H:2
	});
	
	//process overlays
	if(qrStyle==2 || qrStyle==3) {
		var imgElm = document.createElement('IMG');
		imgElm.setAttribute('src', 'qrlogo.png');
		imgElm.setAttribute('id', 'qrLogo');
		imgElm.setAttribute('width', 42);
		imgElm.setAttribute('height', 42);
		imgElm.setAttribute('style', 'position:absolute; top:122px; left:112px; z-Index:999;');
		document.getElementById('qrOuter').appendChild(imgElm);
	}
	else if(qrStyle==1) {
		//QR corner logos (1of3)
		imgElm = document.createElement('IMG');
		imgElm.setAttribute('src', 'qrlogo.png');
		imgElm.setAttribute('id', 'qrCorner1');
		imgElm.setAttribute('width', 34);
		imgElm.setAttribute('height', 34);
		imgElm.setAttribute('style', 'position:absolute; top:15px; left:13px; z-Index:999;');
		document.getElementById('qrOuter').appendChild(imgElm);
		
		//QR corner logos (2of3)
		imgElm = document.createElement('IMG');
		imgElm.setAttribute('src', 'qrlogo.png');
		imgElm.setAttribute('id', 'qrCorner2');
		imgElm.setAttribute('width', 34);
		imgElm.setAttribute('height', 34);
		imgElm.setAttribute('style', 'position:absolute; top:15px; left:208px; z-Index:999;');
		document.getElementById('qrOuter').appendChild(imgElm);
		
		//QR corner logos (3of3)
		imgElm = document.createElement('IMG');
		imgElm.setAttribute('src', 'qrlogo.png');
		imgElm.setAttribute('id', 'qrCorner3');
		imgElm.setAttribute('width', 34);
		imgElm.setAttribute('height', 34);
		imgElm.setAttribute('style', 'position:absolute; top:208px; left:13px; z-Index:999;');
		document.getElementById('qrOuter').appendChild(imgElm);
		
	}
	
}
</script>

</body>
</html>