<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STD - VR 360 Demo</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pannellum@2.5.6/build/pannellum.css"/>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/pannellum@2.5.6/build/pannellum.js"></script>
    <style>
    #panorama {
        width: 800px;
        height: 800px;
    }
    #panorama2 {
        width: 800px;
        height: 800px;
    }
    </style>
</head>
<body bgcolor='black'>
<table border=0 cellpadding=0 cellspacing=0><tr>
<td><div id="panorama"></div></td>
<td><div id="panorama2"></div></td>
<td valign=top>
	<input type=button value='Pan(-)'  style="width:100px;" onclick='panM();'><br>
	<input type=button value='Pan(+)'  style="width:100px;" onclick='panP();'><br><br>
	<input type=button value='Tilt(-)' style="width:100px;" onclick='tiltM();'><br>
	<input type=button value='Tilt(+)' style="width:100px;" onclick='tiltP();'><br><br>
	<input type=button value='Zoom(-)' style="width:100px;" onclick='zoomM();'><br>
	<input type=button value='Zoom(+)' style="width:100px;" onclick='zoomP();'>
</td>
</tr></table>

<script>
var imgsrc = "https://stdatahk.com/vr/hd/img/P40.jpg";
if(location.href.lastIndexOf('?') > 0) {
	var param = location.href.substring(location.href.lastIndexOf('?')+1);
	imgsrc = "https://stdatahk.com/vr/hd/img/P"+ param +".jpg";
}

// pannellum.viewer('panorama', {
//     "type": "equirectangular",
//     "panorama": imgsrc,
// 	"autoLoad" : true
// });

var myviewer = pannellum.viewer('panorama', {   
    "default": {
        "firstScene": "room",
        "author": "STDataHK",
        "sceneFadeDuration": 1000,
		"autoLoad" : true
    },

    "scenes": {
        "room": {
            "title": "得如樓大廈（共居）",
            "hfov": 110,
            "pitch": -3,
            "yaw": 117,
            "type": "equirectangular",
            "panorama": imgsrc,
            "hotSpots": [
                {
                    "pitch": -32,
                    "yaw": 270,
                    "type": "scene",
                    "text": "前進",
                    "sceneId": "room2"  
                },
                {
                    "pitch": -17,
                    "yaw": 357,
                    "type": "scene",
                    "text": "洗手間",
                    "sceneId": "toilet"  
                }
            ]
        },
        "toilet": {
            "title": "得如樓大廈（共居）",
            "hfov": 110,
            "pitch": -3,
            "yaw": 117,
            "type": "equirectangular",
            "panorama": "https://stdatahk.com/vr/hd/img/P35.jpg",
            "hotSpots": [
                {
                    "pitch": -28,
                    "yaw": 360,
                    "type": "scene",
                    "text": "返回",
                    "sceneId": "room" 
                }
            ]
        },
        "room2": {
            "title": "得如樓大廈（共居）",
            "hfov": 110,
            "pitch": -3,
            "yaw": 117,
            "type": "equirectangular",
            "panorama": "https://stdatahk.com/vr/hd/img/P12.jpg",
            "hotSpots": [
                {
                    "pitch": -40,
                    "yaw": 105,
                    "type": "scene",
                    "text": "返回",
                    "sceneId": "room"  
                }
            ]
        }
    }
});

//==============================================================


var imgsrc2 = "https://stdatahk.com/vr/hd/img/P40.jpg";
if(location.href.lastIndexOf('?') > 0) {
	var param = location.href.substring(location.href.lastIndexOf('?')+1);
	imgsrc = "https://stdatahk.com/vr/hd/img/P"+ param +".jpg";
}

// pannellum.viewer('panorama', {
//     "type": "equirectangular",
//     "panorama": imgsrc,
// 	"autoLoad" : true
// });

var myviewer2 = pannellum.viewer('panorama2', {   
    "default": {
        "firstScene": "room",
        "author": "STDataHK",
        "sceneFadeDuration": 1000,
		"autoLoad" : true
    },

    "scenes": {
        "room": {
            "title": "得如樓大廈（共居）",
            "hfov": 110,
            "pitch": -3,
            "yaw": 117,
            "type": "equirectangular",
            "panorama": imgsrc2,
            "hotSpots": [
                {
                    "pitch": -32,
                    "yaw": 270,
                    "type": "scene",
                    "text": "前進",
                    "sceneId": "room2"  
                },
                {
                    "pitch": -17,
                    "yaw": 357,
                    "type": "scene",
                    "text": "洗手間",
                    "sceneId": "toilet"  
                }
            ]
        },
        "toilet": {
            "title": "得如樓大廈（共居）",
            "hfov": 110,
            "pitch": -3,
            "yaw": 117,
            "type": "equirectangular",
            "panorama": "https://stdatahk.com/vr/hd/img/P35.jpg",
            "hotSpots": [
                {
                    "pitch": -28,
                    "yaw": 360,
                    "type": "scene",
                    "text": "返回",
                    "sceneId": "room" 
                }
            ]
        },
        "room2": {
            "title": "得如樓大廈（共居）",
            "hfov": 110,
            "pitch": -3,
            "yaw": 117,
            "type": "equirectangular",
            "panorama": "https://stdatahk.com/vr/hd/img/P12.jpg",
            "hotSpots": [
                {
                    "pitch": -40,
                    "yaw": 105,
                    "type": "scene",
                    "text": "返回",
                    "sceneId": "room"  
                }
            ]
        }
    }
});

//=============================================

function panM() {
	myviewer.setYaw( myviewer.getYaw() -10);
	myviewer2.setYaw(myviewer2.getYaw()-10);
}

function panP() {
	myviewer.setYaw( myviewer.getYaw() +10);
	myviewer2.setYaw(myviewer2.getYaw()+10);
}

function tiltM() {
	myviewer.setPitch( myviewer.getPitch() -10);
	myviewer2.setPitch(myviewer2.getPitch()-10);
}

function tiltP() {
	myviewer.setPitch( myviewer.getPitch() +10);
	myviewer2.setPitch(myviewer2.getPitch()+10);
}

function zoomM() {
	myviewer.setHfov( myviewer.getHfov() +10);
	myviewer2.setHfov(myviewer2.getHfov()+10);
}

function zoomP() {
	myviewer.setHfov( myviewer.getHfov() -10);
	myviewer2.setHfov(myviewer2.getHfov()-10);
}


document.onkeydown = detectKeyboard;
function detectKeyboard(e) {
    e = e || window.event;

    if (e.keyCode == '65') { //'A'
		zoomM();
    }
    if (e.keyCode == '90') { //'Z'
		zoomP();
    }
    else if (e.keyCode == '38') { //UP
		tiltP();
    }
    else if (e.keyCode == '40') { //DN
		tiltM();
    }
    else if (e.keyCode == '37') { //L
		panM();
    }
    else if (e.keyCode == '39') { //R
		panP();
    }
}

</script>


</body>
</html>